<div class="search-page">
  <div class="container">
    <!-- Search Header -->
    <div class="search-header">
      <h1>Search</h1>
      <div class="search-form">
        <div class="search-box">
          <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M21 21L15.5 15.5M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2"/>
          </svg>
          <input 
            type="text" 
            placeholder="Search for products..."
            class="search-input"
            [(ngModel)]="searchQuery"
            (keyup)="onSearchKeyup($event)"
            #searchInput
            autocomplete="off">
          <button 
            class="search-btn" 
            (click)="performSearch()"
            [disabled]="isLoading">
            {{ isLoading ? 'Searching...' : 'Search' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <div class="spinner"></div>
      <p>Searching products...</p>
    </div>

    <!-- Search Results -->
    <div *ngIf="!isLoading && hasSearched" class="search-results">
      <!-- Results Header -->
      <div class="results-header">
        <h2 *ngIf="searchResults.length > 0">
          Found {{ searchResults.length }} result{{ searchResults.length !== 1 ? 's' : '' }} for "{{ searchQuery }}"
        </h2>
        <h2 *ngIf="searchResults.length === 0">
          No results found for "{{ searchQuery }}"
        </h2>
      </div>

      <!-- Products Grid -->
      <div class="products-grid" *ngIf="searchResults.length > 0">
        <div class="product-card" *ngFor="let product of searchResults">
          <a [routerLink]="['/product', getProductSlug(product.name)]" class="product-link">
            <div class="product-image">
              <img [src]="product.images[0]" [alt]="product.name" class="product-img">
              <div *ngIf="!product.inStock" class="sold-out-overlay">SOLD OUT</div>
            </div>
            <div class="product-info">
              <h3 class="product-name">{{ product.name }}</h3>
              <div class="product-price">
                <span class="price" [class.sale]="product.originalPrice">€{{ product.price }}</span>
                <span *ngIf="product.originalPrice" class="original-price">€{{ product.originalPrice }}</span>
              </div>
            </div>
          </a>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="searchResults.length === 0" class="empty-state">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" class="empty-icon">
          <path d="M21 21L15.5 15.5M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2"/>
        </svg>
        <h3>No products found</h3>
        <p>Try adjusting your search terms or browse our categories</p>
        <a routerLink="/shop" class="browse-btn">Browse All Products</a>
      </div>
    </div>

    <!-- Initial State -->
    <div *ngIf="!hasSearched && !isLoading" class="initial-state">
      <div class="search-suggestions">
        <h3>Popular Searches</h3>
        <div class="suggestion-tags">
          <button class="suggestion-tag" (click)="searchQuery = 'tees'; performSearch()">Tees</button>
          <button class="suggestion-tag" (click)="searchQuery = 'sweats'; performSearch()">Sweats</button>
          <button class="suggestion-tag" (click)="searchQuery = 'outerwear'; performSearch()">Outerwear</button>
          <button class="suggestion-tag" (click)="searchQuery = 'accessories'; performSearch()">Accessories</button>
        </div>
      </div>
    </div>
  </div>
</div>
